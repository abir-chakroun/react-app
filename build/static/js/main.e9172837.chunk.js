(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{119:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(45),c=a.n(o),l=(a(93),a(12)),s=a(9),i=a(13),u=a(14),d=a(15),m=(a(60),a(82)),p=a(32),h=function(){return r.a.createElement("div",null,r.a.createElement("h1",null," About component "))},b=function(e){return r.a.createElement("div",null,r.a.createElement("h1",null," Contact component "))},g=a(11),f=a.n(g),v=a(8),E=a(72),k=a(137),C=a(138),y=a(147),j=a(7),w=a.n(j),x=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).removeFromCart=function(e){var t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a.CancelTokenSource=w.a.CancelToken.source,n.prev=1,n.next=4,f.a.awrap(w.a.delete("http://localhost:3000/cart/"+e,{cancelToken:a.CancelTokenSource.token}));case 4:(t=n.sent).data?console.log(t.data.message):console.log("cannot delete product from cart"),n.next=20;break;case 8:if(n.prev=8,n.t0=n.catch(1),w.a.isCancel(n.t0)&&console.log("Error",n.t0.message),!n.t0.response){n.next=15;break}console.log(n.t0.response.data),n.next=20;break;case 15:if(!n.t0.request){n.next=19;break}console.log(n.t0.request.data),n.next=20;break;case 19:throw n.t0;case 20:return n.prev=20,a.CancelTokenSource=null,n.finish(20);case 23:case"end":return n.stop()}}),null,null,[[1,8,20,23]])},a.MinusQuantity=function(e){return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return a.CancelTokenSource=w.a.CancelToken.source,t.prev=1,t.next=4,f.a.awrap(w.a.post("http://localhost:3000/cart/"+e,{cancelToken:a.CancelTokenSource.token}));case 4:t.sent.data||console.log("cannot update product from cart"),t.next=20;break;case 8:if(t.prev=8,t.t0=t.catch(1),w.a.isCancel(t.t0)&&console.log("Error",t.t0.message),!t.t0.response){t.next=15;break}console.log(t.t0.response.data),t.next=20;break;case 15:if(!t.t0.request){t.next=19;break}console.log(t.t0.request.data),t.next=20;break;case 19:throw t.t0;case 20:return t.prev=20,a.CancelTokenSource=null,t.finish(20);case 23:case"end":return t.stop()}}),null,null,[[1,8,20,23]])},a.AddQuantity=function(e){return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return a.CancelTokenSource=w.a.CancelToken.source,t.prev=1,t.next=4,f.a.awrap(w.a.post("http://localhost:3000/cart/"+e,{cancelToken:a.CancelTokenSource.token}));case 4:t.sent.data||console.log("cannot update product from cart"),t.next=20;break;case 8:if(t.prev=8,t.t0=t.catch(1),w.a.isCancel(t.t0)&&console.log("Error",t.t0.message),!t.t0.response){t.next=15;break}console.log(t.t0.response.data),t.next=20;break;case 15:if(!t.t0.request){t.next=19;break}console.log(t.t0.request.data),t.next=20;break;case 19:throw t.t0;case 20:return t.prev=20,a.CancelTokenSource=null,t.finish(20);case 23:case"end":return t.stop()}}),null,null,[[1,8,20,23]])},a.state={qty:0,total_price:0},a._isMounted=!1,a.removeFromCart=a.removeFromCart.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this._isMounted&&this.removeFromCart()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidUpdate",value:function(){this._isMounted=!0,this._isMounted&&(this.removeFromCart()||this.AddQuantity()||this.MinusQuantity())}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(k.a,null,r.a.createElement(C.a,null,r.a.createElement(y.a,{style:{height:"100px",width:"100px"},src:this.props.order.imagePath})),r.a.createElement(C.a,{style:{width:"150px"}},r.a.createElement("h6",{className:"title text-truncate"},this.props.order.title," ")),r.a.createElement(C.a,{style:{width:"100px"}},r.a.createElement("div",{class:"btn-group btn-group-justified",role:"group","aria-label":"..."},r.a.createElement("div",{class:"btn-group",role:"group"},r.a.createElement("button",{type:"button",class:"btn btn-default btn-danger",onClick:function(){return e.MinusQuantity(e.props.id)}},"-")),r.a.createElement("div",{class:"btn-group",role:"group"},r.a.createElement("button",{type:"button",class:"btn btn-default"}," ",this.props.qty," ")),r.a.createElement("div",{class:"btn-group",role:"group"},r.a.createElement("button",{type:"button",class:"btn btn-default btn-success",onClick:function(){return e.AddQuantity(e.props.id)}},"+")))),r.a.createElement(C.a,null," ",r.a.createElement("var",{className:"price"},this.props.order.price," ")," "),r.a.createElement(C.a,null," ",r.a.createElement("a",{href:"",className:"btn btn-outline-danger",onClick:function(){return e.removeFromCart(e.props.id)}}," \xd7 Remove")," ")))}}]),t}(n.Component),O=a(139),S=a(141),T=a(140),_=a(19),M=Object(_.a)((function(e){return{root:{width:"25%"}}}))(C.a),q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).getCart=function(){var e,t,n,r,o;return f.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return a.CancelTokenSource=w.a.CancelToken.source,c.prev=1,e=[],c.next=5,f.a.awrap(w.a.get("http://localhost:3000/cart/all",{cancelToken:a.CancelTokenSource.token}));case 5:if((t=c.sent).data){for(n=0,r=0,o=0;o<t.data.count;o++)e.push({id:t.data.cart[o]._id,product:t.data.cart[o].product,qty:t.data.cart[o].quantity}),n+=t.data.cart[o].quantity,r+=t.data.cart[o].quantity*t.data.cart[o].product.price;a._isMounted&&a.setState({cart_products:e,tot_qty:n,tot_price:r}),console.log(a.state)}else console.log("empty cart");c.next=21;break;case 9:if(c.prev=9,c.t0=c.catch(1),w.a.isCancel(c.t0)&&console.log("Error",c.t0.message),!c.t0.response){c.next=16;break}console.log(c.t0.response.data),c.next=21;break;case 16:if(!c.t0.request){c.next=20;break}console.log(c.t0.request.data),c.next=21;break;case 20:throw c.t0;case 21:return c.prev=21,a.CancelTokenSource=null,c.finish(21);case 24:case"end":return c.stop()}}),null,null,[[1,9,21,24]])},a.state={tot_qty:0,tot_price:0,cart_products:[{id:0,product:{},qty:0}]},a._isMounted=!1,a.getCart=a.getCart.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this._isMounted&&this.getCart()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidUpdate",value:function(){this._isMounted=!0,this._isMounted&&this.getCart()}},{key:"render",value:function(){if(console.log(this.state),!this.state)return r.a.createElement("div",null," ",r.a.createElement("h1",null," Your cart is empty ! "),r.a.createElement(E.a,{variant:"dark",href:"/"}," Shop Now "));var e;this.statetot_qty;return e=this.state.cart_products.map((function(e){return r.a.createElement(x,{key:e.id,id:e.id,order:e.product,qty:e.qty})})),r.a.createElement("div",null,r.a.createElement("h2",{className:"text-center"}," Shopping Cart "),r.a.createElement(O.a,{className:"fixed"},r.a.createElement(T.a,null,r.a.createElement(k.a,null,r.a.createElement(M,null,"        "),r.a.createElement(M,null,"Product "),r.a.createElement(M,null,"Quantity"),r.a.createElement(M,null,"Price   "),r.a.createElement(M,null,"        "))),r.a.createElement(S.a,null,e)))}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChangeEmail=a.handleChangeEmail.bind(Object(v.a)(a)),a.handleChangePassword=a.handleChangePassword.bind(Object(v.a)(a)),a.handleChangeEmail=a.handleChangeEmail.bind(Object(v.a)(a)),a.onSubmit=a.onSubmit.bind(Object(v.a)(a)),a.state={email:"",password:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"onSubmit",value:function(e){e.preventDefault();var t={email:this.state.email,password:this.state.password};console.log(t),w.a.post("http://localhost:3000/user/login",t).then((function(e){return console.log(e.data)}))}},{key:"handleChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"handleChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",null,r.a.createElement("label",null,"Email address"),r.a.createElement("input",{type:"email",placeholder:"Enter email",onChange:this.handleChangeEmail})),r.a.createElement("div",null,r.a.createElement("label",null,"Password"),"c",r.a.createElement("input",{type:"password",placeholder:"Password",onChange:this.handleChangePassword})),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Submit"})))}}]),t}(n.Component),P=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChangeEmail=a.handleChangeEmail.bind(Object(v.a)(a)),a.handleChangePassword=a.handleChangePassword.bind(Object(v.a)(a)),a.handleChangeEmail=a.handleChangeEmail.bind(Object(v.a)(a)),a.onSubmit=a.onSubmit.bind(Object(v.a)(a)),a.state={email:"",password:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"onSubmit",value:function(e){e.preventDefault();var t={email:this.state.email,password:this.state.password};console.log(t),w.a.post("http://localhost:3000/user/signup",t).then((function(e){return console.log(e.data)}))}},{key:"handleChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"handleChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",null,r.a.createElement("label",null,"Email address"),r.a.createElement("input",{type:"email",placeholder:"Enter email",onChange:this.handleChangeEmail})),r.a.createElement("div",null,r.a.createElement("label",null,"Password"),"c",r.a.createElement("input",{type:"password",placeholder:"Password",onChange:this.handleChangePassword})),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Submit"})))}}]),t}(n.Component),D=a(54),A=a(145),U=a(74),F=a.n(U),Q=function(){var e=Object(n.useState)(0),t=Object(D.a)(e,2),a=t[0],o=t[1];return r.a.createElement("div",{className:"container"},r.a.createElement(A.a,{activeIndex:a,onSelect:function(e,t){o(e)}},r.a.createElement(A.a.Item,null,r.a.createElement("img",{className:"d-block w-100",height:"400",src:F.a,alt:"First slide"}),r.a.createElement(A.a.Caption,null,r.a.createElement("h3",null," Croissant Day !"),r.a.createElement("p",null," Enjoy your coffee with one free delicious croissant ")))))},W=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).AddToCart=function(e){var t,n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a.CancelTokenSource=w.a.CancelToken.source,r.prev=1,t={id:e.id,title:e.title,imagePath:e.imagePath,price:e.price.toString(),description:e.description},r.next=5,f.a.awrap(w.a.post("http://localhost:3000/cart/",t,{cancelToken:a.CancelTokenSource.token}));case 5:(n=r.sent).data?console.log(n.data.message):console.log("error connecting to the server! response is empty"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),w.a.isCancel(r.t0)?console.log("Error",r.t0.message):r.t0.response?console.log(r.t0.response.data):r.t0.request?console.log(r.t0.request.data):console.log("Error",r.t0.message);case 12:return r.prev=12,a.CancelTokenSource=null,r.finish(12);case 15:case"end":return r.stop()}}),null,null,[[1,9,12,15]])},a._isMounted=!1,a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this._isMounted&&this.AddToCart()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-lg-4 d-flex align-items-stretch"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"embed-responsive embed-responsive-16by9"},r.a.createElement("img",{className:"card-img-top embed-responsive-item",src:this.props.product.imagePath,alt:"productImage"})),r.a.createElement("div",{className:"caption"},r.a.createElement("h3",null,this.props.product.title),r.a.createElement("p",{className:"description"},this.props.product.description),r.a.createElement("div",{className:"card-img-bottom"},r.a.createElement("div",{className:"price float-left"},r.a.createElement("strong",null," ",this.props.product.price," DT ")," "),r.a.createElement(E.a,{onClick:function(){e.AddToCart(e.props.product)},className:"btn btn-success float-right",role:"button"},"Add To Cart")))))}}]),t}(n.Component),I=function(e){function t(e){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).call(this,e))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t=this.props.products;return t&&(e=t.map((function(e){return r.a.createElement(W,{key:e.id,product:e})}))),console.log(this.props),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},e))}}]),t}(n.Component),L=a(146),B=a(143),J=a(142),R=a(144),Y=a(81),$=a(76),z=a.n($),G=a(43),H=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).getCart=function(){var t,a,n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.CancelTokenSource=w.a.CancelToken.source,r.prev=1,[],r.next=5,f.a.awrap(w.a.get("http://localhost:3000/cart/all",{cancelToken:e.CancelTokenSource.token}));case 5:if((t=r.sent).data){for(a=0,n=0;n<t.data.count;n++)a+=t.data.cart[n].quantity;e._isMounted&&e.setState({tot_qty:a}),console.log(e.state)}else console.log("empty cart");r.next=21;break;case 9:if(r.prev=9,r.t0=r.catch(1),w.a.isCancel(r.t0)&&console.log("Error",r.t0.message),!r.t0.response){r.next=16;break}console.log(r.t0.response.data),r.next=21;break;case 16:if(!r.t0.request){r.next=20;break}console.log(r.t0.request.data),r.next=21;break;case 20:throw r.t0;case 21:return r.prev=21,e.CancelTokenSource=null,r.finish(21);case 24:case"end":return r.stop()}}),null,null,[[1,9,21,24]])},e.state={tot_qty:0},e._isMounted=!1,e.getCart=e.getCart.bind(Object(v.a)(e)),e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this._isMounted&&this.getCart()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidUpdate",value:function(){this._isMounted=!0,this._isMounted&&this.getCart()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(G.a,{bg:"dark",variant:"dark",expand:"lg"},r.a.createElement("img",{alt:"logo",src:z.a,width:"40",height:"40",className:"d-inline-block align-top"})," "," ",r.a.createElement(G.a.Brand,{href:"/"},"Coffee Shop"),r.a.createElement(G.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(G.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(L.a,{className:"mr-auto"},r.a.createElement(L.a.Link,{href:"/about"}," About"),r.a.createElement(L.a.Link,{href:"/contact"},"Contact"),r.a.createElement(L.a.Link,null,"User"),r.a.createElement(B.a,{title:"",id:"basic-nav-dropdown"},r.a.createElement(B.a.Item,{href:"/register"},"Register"),r.a.createElement(B.a.Item,{href:"/login"},"Login")),r.a.createElement(L.a.Link,{href:"/cart",onClick:this.getCart}," Cart",r.a.createElement(J.a,{pill:!0,variant:"danger",className:"badge"},this.state.tot_qty))),r.a.createElement(R.a,{inline:!0},r.a.createElement(Y.a,{type:"text",placeholder:"Search",className:"mr-sm-2"}),r.a.createElement(E.a,{variant:"outline-info"},"Search")))))}}]),t}(n.Component),K=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).CancelToken=w.a.CancelToken,e.source=e.CancelToken.source(),e.abortController=new AbortController,e.getProducts=function(){var t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e.CancelTokenSource=w.a.CancelToken.source,a.prev=1,a.next=4,f.a.awrap(w.a.get("http://localhost:3000/",{cancelToken:e.CancelTokenSource.token}));case 4:t=a.sent,e._isMounted&&e.setState({products:t.data.products}),a.next=20;break;case 8:if(a.prev=8,a.t0=a.catch(1),w.a.isCancel(a.t0)&&console.log("Error",a.t0.message),!a.t0.response){a.next=15;break}console.log(a.t0.response.data),a.next=20;break;case 15:if(!a.t0.request){a.next=19;break}console.log(a.t0.request.data),a.next=20;break;case 19:throw a.t0;case 20:return a.prev=20,e.CancelTokenSource=null,a.finish(20);case 23:case"end":return a.stop()}}),null,null,[[1,8,20,23]])},e._isMounted=!1,e.state={products:[]},e.getProducts=e.getProducts.bind(Object(v.a)(e)),e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this._isMounted&&this.getProducts()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){return console.log(this.state.cart),r.a.createElement("div",null,r.a.createElement(Q,null),r.a.createElement(I,{products:this.state.products}))}}]),t}(n.Component),V=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(m.a,null,r.a.createElement(H,null),r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/",exact:!0,component:K}),r.a.createElement(p.a,{path:"/about",component:h}),r.a.createElement(p.a,{path:"/contact",component:b}),r.a.createElement(p.a,{path:"/cart",component:q}),r.a.createElement(p.a,{path:"/login",component:N}),r.a.createElement(p.a,{path:"/register",component:P}))))}}]),t}(n.Component);a(118),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},60:function(e,t,a){},74:function(e,t,a){e.exports=a.p+"static/media/special.06ea83c3.jpg"},76:function(e,t,a){e.exports=a.p+"static/media/logo.d3007d28.png"},88:function(e,t,a){e.exports=a(119)},93:function(e,t,a){}},[[88,1,2]]]);
//# sourceMappingURL=main.e9172837.chunk.js.map